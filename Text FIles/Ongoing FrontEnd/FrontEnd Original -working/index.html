<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ticket Management System</title>

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="header">
      <h1>Ticket Management System</h1>
    </div>

    <div class="container">
      <!-- User Info -->
      <div id="userInfo" class="user-info hidden">
        <strong>Logged in as:</strong> <span id="currentUser"></span> (<span
          id="currentRole"
        ></span
        >)
        <button onclick="logout()" style="float: right">Logout</button>
      </div>

      <!-- Login Form -->
      <div id="loginSection">
        <div class="tab-content active">
          <h2>Login</h2>
          <form id="loginForm">
            <div class="form-group">
              <label for="loginUsername">Username:</label>
              <input type="text" id="loginUsername" required />
            </div>
            <div class="form-group">
              <label for="loginPassword">Password:</label>
              <input type="password" id="loginPassword" required />
            </div>
            <button type="submit">Login</button>
          </form>
        </div>
      </div>

      <!-- Main Application -->
      <div id="mainApp" class="hidden">
        <div class="nav-tabs">
          <button class="nav-tab active" onclick="showTab('engineers')">
            Engineers
          </button>
          <button class="nav-tab" onclick="showTab('customers')">
            Customers
          </button>
          <button class="nav-tab" onclick="showTab('tickets')">Tickets</button>
        </div>

        <!-- Engineers Tab -->
        <div id="engineers" class="tab-content active">
          <h2>Engineers Management</h2>
          <div class="two-column">
            <div>
              <h3>Create Engineer</h3>
              <form id="engineerForm">
                <div class="form-group">
                  <label for="engineerUsername">Username:</label>
                  <input type="text" id="engineerUsername" required />
                </div>
                <div class="form-group">
                  <label for="engineerPassword">Password:</label>
                  <input type="password" id="engineerPassword" required />
                </div>
                <button type="submit">Create Engineer</button>
              </form>
            </div>
            <div>
              <h3>Engineers List</h3>
              <button onclick="loadEngineers()">Refresh</button>
              <div id="engineersList"></div>
            </div>
          </div>
        </div>

        <!-- Customers Tab -->
        <div id="customers" class="tab-content">
          <h2>Customers Management</h2>
          <div class="two-column">
            <div>
              <h3>Create Customer</h3>
              <form id="customerForm">
                <div class="form-group">
                  <label for="customerUsername">Username:</label>
                  <input type="text" id="customerUsername" required />
                </div>
                <div class="form-group">
                  <label for="customerPassword">Password:</label>
                  <input type="password" id="customerPassword" required />
                </div>
                <button type="submit">Create Customer</button>
              </form>
            </div>
            <div>
              <h3>Customers List</h3>
              <button onclick="loadCustomers()">Refresh</button>
              <div id="customersList"></div>
            </div>
          </div>
        </div>

        <!-- Tickets Tab -->
        <div id="tickets" class="tab-content">
          <h2>Tickets Management</h2>
          <div class="two-column">
            <div>
              <h3>Create Ticket</h3>
              <form id="ticketForm">
                <div class="form-group">
                  <label for="ticketDescription">Description:</label>
                  <textarea id="ticketDescription" required></textarea>
                </div>
                <!-- REMOVE THIS -->
                <!-- <div class="form-group">
                                <label for="ticketCustomer">Customer:</label>
                                <select id="ticketCustomer" required>
                                    <option value="">Select Customer</option>
                                </select>
                            </div> -->
                <div class="form-group">
                  <label for="ticketEngineer">Engineer (Optional):</label>
                  <select id="ticketEngineer">
                    <option value="">Select Engineer</option>
                  </select>
                </div>
                <button type="submit">Create Ticket</button>
              </form>
            </div>
            <div>
              <h3>Tickets List</h3>
              <button onclick="loadTickets()">Refresh</button>
              <div id="ticketsList"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Messages -->
      <div id="messages"></div>
    </div>

<!--    <script src="script.js"></script>
     Load JS files in this order -->
<script src="js/utils.js"></script>
<script src="js/auth.js"></script>
<script src="js/engineers.js"></script>
<script src="js/customers.js"></script>
<script src="js/tickets.js"></script> 
    <script src="js/main.js"></script>
  </body>
</html>
